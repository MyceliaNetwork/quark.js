!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).quark={})}(this,(function(e){"use strict";let r,t=[];const i=["ii"],o=["ICP"];e.init=e=>{function n(e=[]){if(!Array.isArray(e))throw new Error("The field `basket` must be an array");if(!e.length)throw new Error("You should provide at least one item to check-out");const r=e.every((e=>{if(!e.name)throw new Error("The field `name` is required");if(!e.value&&0!==e.value)throw new Error("The field `value` is required");if(!e.token)throw new Error("The field `token` is required");if("string"!=typeof e.name)throw new Error("The field `name` must be of type 'string'");if("number"!=typeof e.value)throw new Error("The field `value` must be of type 'number'");if("string"!=typeof e.token)throw new Error("The field `token` must be of type 'string'");if(!o.includes(e.token))throw new Error("The field `token` must be one of: "+o.join(", "));if(e.description&&"string"!=typeof e.description)throw new Error("The field `description` must be of type 'string'");return!0})),t=function(e=[]){let r=0;return e.forEach((e=>r+=Number(e.value))),r}(e);return r&&t>0}return function(e){if(!e.integrator)throw new Error("The field `integrator` is required");if(!e.domain)throw new Error("The field `domain` is required");if(!e.notify)throw new Error("The field `notify` is required");if(!e.authProvider)throw new Error("The field `authProvider` is required");if("string"!=typeof e.integrator)throw new Error("The field `integrator` must be of type 'string'");if("string"!=typeof e.domain)throw new Error("The field `domain` must be of type 'string'");if("string"!=typeof e.authProvider)throw new Error("The field `authProvider` must be of type 'string'");if("object"!=typeof e.notify)throw new Error("The field `notify` must be of type 'object'");if(!e.notify.principalId||!e.notify.methodName)throw new Error("The field `notify` must have two properties: `principalId` and `methodName`");if(!e.notify.principalId)throw new Error("The field `notify` requires a field called `principalId`");if("string"!=typeof e.notify.principalId)throw new Error("The field `notify.principalId` must be of type 'string'");if(!e.notify.methodName)throw new Error("The field `notify` requires a field called `methodName`");if("string"!=typeof e.notify.methodName)throw new Error("The field `notify.methodName` must be of type 'string'");if(!i.includes(e.authProvider))throw new Error("The field `authProvider` must be one of: "+i.join(", "))}(e),window.addEventListener("message",(function(i){if(i.origin===e.domain&&["checkoutLoaded","checkoutComplete"].includes(i.data.type))if("checkoutLoaded"===i.data.type){const i=JSON.parse(JSON.stringify({type:"basketUpdate",basket:t,origin:origin,notify:e.notify,integrator:e.integrator,authProvider:e.authProvider}));r.postMessage(i,e.domain)}else"checkoutComplete"===i.data.type&&e.callback(i.data)}),!1),{checkout:function(i){if(!n(i))return;t=i;const o=JSON.stringify({origin:window.origin,authProvider:e.authProvider});r=window.open(`${e.domain}/checkout?checkoutData=${btoa(o)}`,"_blank")}}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=quark.js.map
